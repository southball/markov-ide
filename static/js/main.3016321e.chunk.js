(this["webpackJsonpmarkov-ide"]=this["webpackJsonpmarkov-ide"]||[]).push([[0],{41:function(e,t,r){e.exports=r(57)},57:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r(11),i=r(18),l=r(8),c=r(5),o=r(32),s=r(21),u=r(22),m=function(){function e(t,r,a){Object(s.a)(this,e),this.isTerminating=void 0,this.left=void 0,this.right=void 0,this.isTerminating=t,this.left=r,this.right=a}return Object(u.a)(e,[{key:"apply",value:function(e){return""===this.left?[!0,this.right+e]:-1!==e.indexOf(this.left)?[!0,e.replace(this.left,this.right)]:[!1,e]}}],[{key:"parse",value:function(t){if(-1===t.indexOf(":"))return null;var r;if(null!=(r=t.match(e.TERMINATING_RULE))){var a=r,n=Object(l.a)(a,3);return new e(!0,n[1],n[2])}if(null!=(r=t.match(e.NONTERMINATING_RULE))){var i=r,c=Object(l.a)(i,3);return new e(!1,c[1],c[2])}throw new Error("Syntax error in line "+t)}}]),e}();m.TERMINATING_RULE=/^([^:]*)::([^:]*)$/,m.NONTERMINATING_RULE=/^([^:]*):([^:]*)$/;var h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(s.a)(this,e),this.rules=void 0,this.initialState=void 0,this.state=void 0,this.terminated=void 0,this.rules=t,this.initialState=r,this.state=a,this.terminated=n}return Object(u.a)(e,[{key:"parseRules",value:function(t){return new e(t.map(m.parse).filter((function(e){return null!==e})),this.initialState,this.state,this.terminated)}},{key:"setInitialState",value:function(t){return new e(this.rules,t,t,this.terminated)}},{key:"reset",value:function(){return new e(this.rules,this.initialState,this.initialState,!1)}},{key:"step",value:function(){if(this.terminated)return[!1,this];var t,r=Object(o.a)(this.rules);try{for(r.s();!(t=r.n()).done;){var a=t.value,n=a.apply(this.state),i=Object(l.a)(n,2),c=i[0],s=i[1];if(c)return[!0,new e(this.rules,this.initialState,s,a.isTerminating)]}}catch(u){r.e(u)}finally{r.f()}return[!1,new e(this.rules,this.initialState,this.state,!0)]}}]),e}(),v=r(33),d=r.n(v),f=r(60),p=r(61),b=r(35),g=r(36),O=r(62),j=r(63),E=r(64),y=r(65);r(53),r(54);function k(e){var t=e.log,r=Object(a.useRef)();return Object(a.useEffect)((function(){console.log(r.current,r.current.scrollTop),"undefined"!==typeof r.current.scrollTop&&(r.current.scrollTop=1e9)}),[t]),a.createElement("div",{ref:r,style:{height:"500px",overflowY:"auto",fontFamily:"Consolas",border:"1px solid #000"}},a.createElement("div",{style:{margin:"1rem"}},t.map((function(e,t){return a.createElement("div",{style:{whiteSpace:"pre-wrap",wordBreak:"break-all"}},t,": ",e)}))))}var I=function(e,t){var r=e.markov,a=e.runInterval,n=(e.error,e.log),o={runInterval:void 0,running:!1};switch(t.type){case"step":if(r.terminated)return clearInterval(a),Object(c.a)(Object(c.a)(Object(c.a)({},e),o),{},{runInterval:void 0});var s=r.step(),u=Object(l.a)(s,2),m=u[0],h=u[1];return m&&!r.terminated&&n.includes(h.state)?(clearInterval(a),Object(c.a)(Object(c.a)(Object(c.a)({},e),o),{},{markov:h,log:[].concat(Object(i.a)(n),[h.state]),error:"Repeating state ".concat(h.state," on step ").concat(n.length,", previous occurred on step ").concat(n.indexOf(h.state))})):m?Object(c.a)(Object(c.a)({},e),{},{markov:h,log:[].concat(Object(i.a)(n),[h.state])}):(clearInterval(a),Object(c.a)(Object(c.a)(Object(c.a)({},e),o),{},{markov:h,log:Object(i.a)(n)}));case"pause":return clearInterval(a),Object(c.a)(Object(c.a)({},e),{},{running:!1});case"reset":return clearInterval(a),Object(c.a)(Object(c.a)(Object(c.a)({},e),o),{},{markov:r.reset(),log:[r.initialState],error:""});case"setRules":clearInterval(a);try{var v=r.parseRules(t.rules);return Object(c.a)(Object(c.a)(Object(c.a)({},e),o),{},{markov:v,error:""})}catch(d){return Object(c.a)(Object(c.a)(Object(c.a)({},e),o),{},{markov:r,error:d.message})}case"setInitialState":return clearInterval(a),Object(c.a)(Object(c.a)(Object(c.a)({},e),o),{},{markov:r.setInitialState(t.initialState),log:[t.initialState],error:""});case"setInterval":return Object(c.a)(Object(c.a)({},e),{},{markov:r,log:n,runInterval:t.interval,running:!0});default:return e}};var w=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),r=t[0],n=t[1],i=Object(a.useState)(5),c=Object(l.a)(i,2),o=c[0],s=c[1],u=Object(a.useReducer)(I,{markov:new h,log:[],runInterval:void 0,error:"",running:!1}),m=Object(l.a)(u,2),v=m[0],w=v.markov,S=v.error,R=v.log,T=v.running,N=v.runInterval,x=m[1];return Object(a.useEffect)((function(){x({type:"setRules",rules:r.split("\n")})}),[r]),Object(a.useEffect)((function(){x({type:"reset"})}),[w.initialState]),a.createElement("div",{className:"App"},a.createElement(f.a,{fluid:!0,style:{padding:"2rem"}},a.createElement("h1",null,"Markov IDE"),a.createElement("h5",null,"Challenge yourself at ",a.createElement("a",{href:"https://mao.snuke.org"},"Markov Algorithm Online")," by ",a.createElement("a",{href:"https://twitter.com/snuke_/"},"@snuke_"),"!"),a.createElement("hr",null),a.createElement(p.a,{style:{marginBottom:"1rem"}},a.createElement(b.a,null,a.createElement(g.a,{placeholder:"State",value:w.state,onChange:function(e){return x({type:"setInitialState",initialState:e.target.value})}}))),a.createElement(p.a,{style:{marginBottom:"1rem"}},a.createElement(b.a,null,a.createElement("h3",null,"Control"),a.createElement(O.a,null,a.createElement(j.a,{disabled:w.terminated,onClick:function(){return function(){if(N&&T)x({type:"pause"});else{var e=setInterval((function(){x({type:"step"})}),500/o);x({type:"setInterval",interval:e})}}()}},T?"Pause":"Run"),a.createElement(j.a,{disabled:T||w.terminated,onClick:function(){return x({type:"step"})}},"Step"),a.createElement(j.a,{onClick:function(){return x({type:"reset"})}},"Reset"),a.createElement(j.a,{variant:"outline-secondary"},"Terminated: ",w.terminated?"Yes":"No"))),a.createElement(b.a,null,a.createElement("h3",null,"Speed (500 ms/step ~ 20 ms/step)"),"Current speed: ",(500/o).toFixed()," ms/step",a.createElement(E.a.Control,{disabled:T,type:"range",min:1,max:25,value:o,onChange:function(e){return s(+e.target.value)}}))),a.createElement(p.a,{style:{marginBottom:"1rem"}},a.createElement(b.a,null,a.createElement("h3",null,"Algorithm"),a.createElement("div",{style:{border:"1px solid #000;"}},a.createElement(d.a,{fontSize:14,width:"auto",height:"500px",mode:"text",theme:"github",value:r,onChange:function(e){return n(e)}}))),a.createElement(b.a,null,a.createElement("h3",null,"Log"),S&&a.createElement(y.a,{variant:"danger",style:{whiteSpace:"pre-wrap",wordBreak:"break-word"}},S),a.createElement(k,{log:R})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r(56);n.render(a.createElement(a.StrictMode,null,a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[41,1,2]]]);
//# sourceMappingURL=main.3016321e.chunk.js.map